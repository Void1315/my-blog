webpackJsonp([0],{100:function(t,e){t.exports={data:function(){return{editorContent:"",editor:"",form:{title:"",text:this.editorContent,tages:[],img_id:this.img_id,fileList:[]},img_data:{_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content"),show:0},inputVisible:!1,inputValue:"",img_id:""}},mounted:function(){var t=this;this.loadAll(),this.$nextTick(function(){t._token=document.getElementsByTagName("meta")["csrf-token"].getAttribute("content"),this.$nextTick(function(){if(t.editor=new wangEditor("#editor-tool","#editor-trigger"),t.editor.customConfig.uploadImgServer="/upload/image",t.editor.customConfig.debug=!0,t.editor.customConfig.uploadImgParams={_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")},t.editor.customConfig.zIndex=1,t.editor.customConfig.uploadFileName="image",t.editor.customConfig.customAlert=function(e){t.$message.error(e)},t.editor.customConfig.uploadImgHooks={success:function(t,e,a){console.log(t,a)}},t.editor.customConfig.onchange=function(){t.editorContent=t.editor.txt.html(),t.form.text=t.editorContent},t.editor.create(),t.$route.params.id){var e=t.$route.params.id;t.$ajax.get("/admin/article/get/"+e).then(function(e){for(var a=0;a<e.data.tages.length;a++)t.form.tages.push(e.data.tages[a].name);t.form.title=e.data.title,t.editorContent=e.data.text,t.form.text=e.data.text,t.editor.txt.html(e.data.text),t.form.img_id=e.data.img_id,t.form.fileList.push({name:"封面",url:e.data.img_url})})}})})},methods:{handleClose:function(t){this.form.tages.splice(this.form.tages.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},querySearch:function(t,e){var a=this.restaurants;e(t?a.filter(this.createFilter(t)):a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},loadAll:function(){var t=[],e=this;this.$ajax.get("/admin/type/list").then(function(a){a.data;for(var i=0;i<a.data.length;i++){var o={value:a.data[i].name};t.push(o)}e.restaurants=t})},handleSelect:function(t){this.handleInputConfirm()},handleInputConfirm:function(){var t=this.inputValue;t&&(-1==this.form.tages.indexOf(t)?this.form.tages.push(t):this.$message("已经添加过此标签！")),this.inputVisible=!1,this.inputValue=""},imgRemove:function(t){console.log(t)},tipLimit:function(){this.$message("只能上传一张封面文件!")},resetForm:function(){this.$refs.form.resetFields(),this.editorContent="",this.editor.txt.html("")},submitForm:function(){var t=this;this.$ajax({method:"post",url:"/create/article",data:this.form}).then(function(e){t.$message({message:"文章上传成功！",type:"success"}),t.resetForm()})},editForm:function(){var t=this;this.$ajax({method:"post",url:"/edit/article/"+this.$route.params.id,data:this.form}).then(function(e){t.$message({message:"文章修改成功！",type:"success"})})},imgUpload:function(t){this.img_id=t,this.form.img_id=this.img_id}}}},101:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"view"},[t._m(0),t._v(" "),a("div",{domProps:{innerHTML:t._s(t.editorContent)}}),t._v(" "),a("hr")]),t._v(" "),a("div",{staticClass:"editor-tool",attrs:{id:"editor-tool"}}),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"form-article"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[a("el-input",{attrs:{size:"medium",placeholder:"文章标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"tages"}},[t._l(t.form.tages,function(e){return a("el-tag",{key:e,attrs:{closable:""},on:{close:function(a){t.handleClose(e)}}},[t._v("\n\t\t\t\t  "+t._s(e)+"\n\t\t\t\t")])}),t._v(" "),t.inputVisible?a("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small","fetch-suggestions":t.querySearch},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2),t._v(" "),a("el-form-item",{attrs:{prop:"fileList"}},[a("el-upload",{attrs:{action:"/create/image","on-remove":t.imgRemove,"file-list":t.form.fileList,multiple:"false","on-exceed":t.tipLimit,"on-success":t.imgUpload,limit:"1",name:"img",data:t.img_data,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传一张封面文件，且不超过2M")])],1)],1),t._v(" "),a("el-form-item",[this.$route.params.id?a("el-button",{on:{click:function(e){t.editForm("form")}}},[t._v("修改")]):a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("提交")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.resetForm()}}},[t._v("重置")])],1)],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("b",[this._v("以下是编辑器的内容：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"editor-container"}},[e("div",{staticClass:"editor-text",attrs:{id:"editor-trigger"}})])}]}},8:function(t,e,a){var i=a(2)(a(100),a(101),!1,function(t){a(98)},"data-v-02443a69",null);t.exports=i.exports},98:function(t,e,a){var i=a(99);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(1)("5cec774f",i,!0,{})},99:function(t,e,a){(e=t.exports=a(0)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css?family=Raleway:300,400,600);",""]),e.push([t.i,"body[data-v-02443a69],html[data-v-02443a69]{height:100%;background-color:#939393;margin:0;font-family:Raleway,sans-serif;font-size:14px;line-height:1.6;color:#636b6f;background-color:#f5f8fa}a[data-v-02443a69]{text-decoration:none}.item-ctent[data-v-02443a69]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.cy[data-v-02443a69]{border-radius:100%;border-width:0;border-style:solid}.inline-box[data-v-02443a69]{display:inline-block}.flex[data-v-02443a69]{display:-webkit-box;display:-ms-flexbox;display:flex}.right-content[data-v-02443a69]{-webkit-transition:all .5s;transition:all .5s;width:auto;right:0;left:330px;position:absolute;z-index:0}.on-cursor[data-v-02443a69]{cursor:pointer}.content[data-v-02443a69]{margin:15px 40px 0 60px;border:1px solid #6666;background-color:#fff;border-radius:3px;-webkit-box-shadow:#7777 1px 0 3px 0;box-shadow:1px 0 3px 0 #7777}.side-triangle[data-v-02443a69]{float:left;display:inline-block;width:0;height:0;border-style:solid;border-width:25px;border-color:#606060 transparent transparent #606060;opacity:.66}.data-box[data-v-02443a69]{margin-top:10px;margin-right:20px;display:inline-block;float:right}.side-hr[data-v-02443a69]{border-top:1px solid #bbb}.short-hr[data-v-02443a69]{margin-top:3px;margin-bottom:15px}.border-shadow[data-v-02443a69]{border:1px solid #6666;-webkit-box-shadow:#777 3px 0 5px 0;box-shadow:3px 0 5px 0 #777;border-radius:3px}.article-box[data-v-02443a69]{width:90%;height:auto;margin:0 auto;margin-top:30px;margin-bottom:25px;border:1px solid #6666;border-radius:3px;-webkit-box-shadow:#7777 1px 0 3px 0;box-shadow:1px 0 3px 0 #7777}.article-box .head-box[data-v-02443a69]{display:inline-block;float:left}.article-box .head-box .title[data-v-02443a69]{font-size:25px;font-weight:600}.article-box .icon-box[data-v-02443a69]{padding:0 45px;margin:15px 0}.table-img[data-v-02443a69]{width:100%;max-width:200px;height:auto}@media screen and (max-width:992px){.content[data-v-02443a69]{border-radius:0;margin:0;border:none;-webkit-box-shadow:none;box-shadow:none}.hidden-phone[data-v-02443a69]{display:none}.show-phone[data-v-02443a69]{display:block}}@media screen and (min-width:992px){.show-phone[data-v-02443a69]{display:none}.text-box img[data-v-02443a69]{width:auto;max-height:400px}}@media screen and (max-width:992px){.article-box[data-v-02443a69]{height:auto;border:none;-webkit-box-shadow:none;box-shadow:none;margin:auto;width:90%}.article-box .head-box[data-v-02443a69]{display:block;float:none;margin-top:10px}.article-box .head-box p[data-v-02443a69]{margin:0}.article-box .data-box[data-v-02443a69]{float:none;margin:0;display:block}.article-box .side-triangle[data-v-02443a69]{display:none}.article-box .img-box[data-v-02443a69]{height:auto;margin-bottom:20px}.article-box .icon-box[data-v-02443a69]{padding:0;margin:0;margin-top:15px}.article-box .icon-box .like[data-v-02443a69]{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.article-box .icon-box .like i[data-v-02443a69]{line-height:25px}}.editor-tool[data-v-02443a69]{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.editor-text[data-v-02443a69]{border:1px solid #bdbdbd77;height:300px}.form-article[data-v-02443a69]{margin-top:20px}@media screen and (max-width:992px){.editor-text[data-v-02443a69]{height:250px}}@media screen and (min-width:992px){.form-article[data-v-02443a69]{width:435px}}",""])}});